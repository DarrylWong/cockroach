# Verify hostError failure are routed to test-eng and marked as infra-flake,
# when the first failure is a non-handled error.

add-failure name=(oops)
----
ok

add-failure name=(oops again) type=(vm-host-error)
----
ok

post
----
----
roachtest.vm_host_error [failed]() on test_branch @ [test_SHA](). A Side-Eye cluster snapshot was captured on timeout: [https://app.side-eye.io/snapshots/1](https://app.side-eye.io/snapshots/1).


```
test github_test failed: oops
(1) attached stack trace
  -- stack trace:
  | github.com/cockroachdb/cockroach/pkg/cmd/roachtest.TestCreatePostRequest.func2.1
  | 	/Users/darrylwong/go/src/github.com/cockroachdb/cockroach/pkg/cmd/roachtest/github_test.go:202
  | github.com/cockroachdb/datadriven.RunTest.func1
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:118
  | github.com/cockroachdb/datadriven.runDirective.func1
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:337
  | github.com/cockroachdb/datadriven.runDirective
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:342
  | github.com/cockroachdb/datadriven.runDirectiveOrSubTest
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:211
  | github.com/cockroachdb/datadriven.runTestInternal
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:184
  | github.com/cockroachdb/datadriven.RunTestAny
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:144
  | github.com/cockroachdb/datadriven.RunTest
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:117
  | github.com/cockroachdb/cockroach/pkg/cmd/roachtest.TestCreatePostRequest.func2
  | 	/Users/darrylwong/go/src/github.com/cockroachdb/cockroach/pkg/cmd/roachtest/github_test.go:164
  | github.com/cockroachdb/datadriven.Walk.func1
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:425
  | github.com/cockroachdb/datadriven.WalkAny
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:436
  | github.com/cockroachdb/datadriven.WalkAny.func1
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/datadriven.go:449
  | github.com/cockroachdb/datadriven.subTest.func1
  | 	/Users/darrylwong/go/pkg/mod/github.com/cockroachdb/datadriven@v1.0.3-0.20240530155848-7682d40af056/test_interface.go:27
  | testing.tRunner
  | 	/Users/darrylwong/go/go1.23.2/src/testing/testing.go:1690
  | runtime.goexit
  | 	/Users/darrylwong/go/go1.23.2/src/runtime/asm_arm64.s:1223
Wraps: (2) oops
Error types: (1) *withstack.withStack (2) *errutil.leafError
hostError VMs: my_VM [owner=test-eng]
```

Parameters:
 - <code>ROACHTEST_arch=amd64</code>
 - <code>ROACHTEST_cloud=gce</code>
 - <code>ROACHTEST_coverageBuild=false</code>
 - <code>ROACHTEST_cpu=4</code>
 - <code>ROACHTEST_encrypted=false</code>
 - <code>ROACHTEST_fs=ext4</code>
 - <code>ROACHTEST_localSSD=true</code>
 - <code>ROACHTEST_runtimeAssertionsBuild=false</code>
 - <code>ROACHTEST_ssd=0</code>
<details><summary>Help</summary>
<p>


See: [roachtest README](https://github.com/cockroachdb/cockroach/blob/master/pkg/cmd/roachtest/README.md)



See: [How To Investigate \(internal\)](https://cockroachlabs.atlassian.net/l/c/SSSBr8c7)



See: [Grafana](https://go.crdb.dev/roachtest-grafana//github-test/1689957243000/1689957853000)

</p>
</details>
/cc @cockroachdb/test-eng
<sub>

[This test on roachdash](https://roachdash.crdb.dev/?filter=status:open%20t:.*vm_host_error.*&sort=title+created&display=lastcommented+project) | [Improve this report!](https://github.com/cockroachdb/cockroach/tree/master/pkg/cmd/bazci/githubpost/issues)

</sub>

------
Labels:
- <code>O-roachtest</code>
- <code>X-infra-flake</code>
- <code>T-testeng</code>
----
----
